name: Publish to Azure

on:
  workflow_call:
    inputs:
      environmentName:
        description: The environment to deploy to
        required: true
        type: string
      branchName:
        type: string
        description: The branch on which the workflow was triggered
        required: true

jobs:
  deploy:
    name: Deploy to the ${{ inputs.environmentName }} Environment
    runs-on: ubuntu-latest
    environment:
      name: ${{ inputs.environmentName }}
    steps:
      - name: Print the envName and branch name
        run: echo "${{ inputs.environmentName }} ${{ inputs.branchName }}"

      - name: Check condition
        if: ${{ (inputs.branchName == 'refs/heads/SW-78--CI/CD-workflow' &&  inputs.environment  == 'Development') }}
        run: echo "Expression evaluated to true"



        #TODO: pull image from the registry and run pulumi scripts to deploy on sepcified env
